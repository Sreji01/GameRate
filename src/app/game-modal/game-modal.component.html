<ion-header>
  <ion-toolbar>
    <ion-title color="secondary" *ngIf="this.type ==='add'">Add a Game</ion-title>
    <ion-title color="secondary" *ngIf="this.type ==='edit'">Edit a Game</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismissModal()">
        <ion-icon name="close-circle-outline" color="primary" class="close-modal-icon"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="gameForm" (ngSubmit)="submitGame()">
    <ion-grid>

      <ion-row>
        <ion-col size="12" size-md="8" offset-md="2">
          <ion-item class="custom-item">
            <ion-label position="stacked" color="secondary" class="custom-label">Game Title</ion-label>
            <ion-input formControlName="title" type="text" class="custom-input"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12" size-md="8" offset-md="2">
          <ion-item class="custom-item">
            <ion-label position="stacked" color="secondary" class="custom-label">Game Year</ion-label>
            <ion-input formControlName="year" type="number" class="custom-input"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row *ngIf="gameForm.get('year')?.invalid && gameForm.get('year')?.value">
        <ion-col size-sm="4" size-md="6" size-lg="6" sizeXl="4" offset-xs="0.8">
          <ion-label color="danger" class="error-label">Game year must be after 1950!</ion-label>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12" size-md="8" offset-md="2">
          <ion-item class="custom-item">
            <ion-label position="stacked" color="secondary" class="custom-label">Game Image URL</ion-label>
            <ion-input formControlName="imageUrl" type="url" class="custom-input"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row class="ion-justify-content-center" *ngIf="gameForm.get('imageUrl')?.invalid && gameForm.get('imageUrl')?.value">
        <ion-col size-sm="4" size-md="6" size-lg="6" sizeXl="4" offset-xs="0.8">
          <ion-label color="danger" class="error-label">Please provide a valid image URL!</ion-label>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12" size-md="8" offset-md="2">
          <ion-item class="custom-item">
            <ion-label position="stacked" color="secondary" class="custom-label">Game Poster URL</ion-label>
            <ion-input formControlName="posterUrl" type="url" class="custom-input"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row class="ion-justify-content-center" *ngIf="gameForm.get('posterUrl')?.invalid && gameForm.get('posterUrl')?.value">
        <ion-col size-sm="4" size-md="6" size-lg="6" sizeXl="4" offset-xs="0.8">
          <ion-label color="danger" class="error-label">Please provide a valid poster URL!</ion-label>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12" size-md="8" offset-md="2">
          <ion-item>
            <ion-label position="stacked" color="secondary" class="custom-label">Game Description</ion-label>
            <ion-textarea formControlName="description" class="game-textarea"></ion-textarea>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row class="ion-justify-content-center" *ngIf="gameForm.get('description')?.invalid && gameForm.get('description')?.value">
        <ion-col size-sm="4" size-md="6" size-lg="6" sizeXl="4" offset-xs="0.8">
          <ion-label color="danger" class="error-label">Minimum 30 characters required!</ion-label>
        </ion-col>
      </ion-row>

      <ion-row class="ion-justify-content-center" *ngIf="type === 'add'">
        <ion-col size-xs="10" size-md="7" size-lg="6" size-xl="6" size-sm="3">
          <ion-button type="submit" color="primary" shape="round" expand="block" [disabled]="gameForm.invalid">Add Game</ion-button>
        </ion-col>
      </ion-row>
      <ion-row class="ion-justify-content-center" *ngIf="type === 'edit'">
        <ion-col size-xs="10" size-md="7" size-lg="6" size-xl="6" size-sm="3">
          <ion-button type="submit" color="primary" shape="round" expand="block" [disabled]="gameForm.invalid">Edit Game</ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
